!function(t,e){"use strict";var r="file:"===t.location.protocol,n=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),i=Array.prototype.forEach||function(t,e){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;var r,n=this.length>>>0;for(r=0;n>r;++r)r in this&&t.call(e,this[r],r,this)},o={},a=0,l=[],s=[],u={},c=function(t){return t.cloneNode(!0)},f=function(t,e){s[t]=s[t]||[],s[t].push(e)},p=function(e,n){if(void 0!==o[e])o[e]instanceof SVGSVGElement?n(c(o[e])):f(e,n);else{if(!t.XMLHttpRequest)return n("Browser does not support XMLHttpRequest"),!1;o[e]={},f(e,n);var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){if(404===i.status||null===i.responseXML)return n("Unable to load SVG file: "+e),r&&n("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),n(),!1;if(!(200===i.status||r&&0===i.status))return n("There was a problem injecting the SVG: "+i.status+" "+i.statusText),!1;if(i.responseXML instanceof Document)o[e]=i.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var t;try{t=(new DOMParser).parseFromString(i.responseText,"text/xml")}catch(e){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)return n("Unable to parse SVG file: "+e),!1;o[e]=t.documentElement}!function(t){for(var e=0,r=s[t].length;r>e;e++)!function(e){setTimeout(function(){s[t][e](c(o[t]))},0)}(e)}(e)}},i.open("GET",e),i.overrideMimeType&&i.overrideMimeType("text/xml"),i.send()}},d=function(e,r,o,s){var c=e.getAttribute("data-src")||e.getAttribute("src");if(/\.svg/i.test(c))if(n)-1===l.indexOf(e)&&(l.push(e),e.setAttribute("src",""),p(c,function(n){if(void 0===n||"string"==typeof n)return s(n),!1;var o=e.getAttribute("id");o&&n.setAttribute("id",o);var f=e.getAttribute("title");f&&n.setAttribute("title",f);var p=[].concat(n.getAttribute("class")||[],"injected-svg",e.getAttribute("class")||[]).join(" ");n.setAttribute("class",function(t){for(var e={},r=(t=t.split(" ")).length,n=[];r--;)e.hasOwnProperty(t[r])||(e[t[r]]=1,n.unshift(t[r]));return n.join(" ")}(p));var d=e.getAttribute("style");d&&n.setAttribute("style",d);var v=[].filter.call(e.attributes,function(t){return/^data-\w[\w\-]*$/.test(t.name)});i.call(v,function(t){t.name&&t.value&&n.setAttribute(t.name,t.value)});var h,g,m,b,y,A={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],pattern:["fill","stroke"],radialGradient:["fill","stroke"]};Object.keys(A).forEach(function(t){h=t,m=A[t];for(var e=0,r=(g=n.querySelectorAll("defs "+h+"[id]")).length;r>e;e++){var o;b=g[e].id,y=b+"-"+a,i.call(m,function(t){for(var e=0,r=(o=n.querySelectorAll("["+t+'*="'+b+'"]')).length;r>e;e++)o[e].setAttribute(t,"url(#"+y+")")}),g[e].id=y}}),n.removeAttribute("xmlns:a");for(var w,x,S=n.querySelectorAll("script"),k=[],j=0,G=S.length;G>j;j++)(x=S[j].getAttribute("type"))&&"application/ecmascript"!==x&&"application/javascript"!==x||(w=S[j].innerText||S[j].textContent,k.push(w),n.removeChild(S[j]));if(k.length>0&&("always"===r||"once"===r&&!u[c])){for(var T=0,M=k.length;M>T;T++)new Function(k[T])(t);u[c]=!0}var V=n.querySelectorAll("style");i.call(V,function(t){t.textContent+=""}),e.parentNode.replaceChild(n,e),delete l[l.indexOf(e)],e=null,a++,s(n)}));else{var f=e.getAttribute("data-fallback")||e.getAttribute("data-png");f?(e.setAttribute("src",f),s(null)):o?(e.setAttribute("src",o+"/"+c.split("/").pop().replace(".svg",".png")),s(null)):s("This browser does not support SVG and no PNG fallback was defined.")}else s("Attempted to inject a file with a non-svg extension: "+c)},v=function(t,e,r){var n=(e=e||{}).evalScripts||"always",o=e.pngFallback||!1,a=e.each;if(void 0!==t.length){var l=0;i.call(t,function(e){d(e,n,o,function(e){a&&"function"==typeof a&&a(e),r&&t.length===++l&&r(l)})})}else t?d(t,n,o,function(e){a&&"function"==typeof a&&a(e),r&&r(1),t=null}):r&&r(0)};"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=v:"function"==typeof define&&define.amd?define(function(){return v}):"object"==typeof t&&(t.SVGInjector=v)}(window,document);